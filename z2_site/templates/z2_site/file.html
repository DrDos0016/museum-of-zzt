{% extends "z2_site/world.html" %}
{% load staticfiles %}

{% block scripts %}
<script>
var letter = "{{letter}}";
var zip = "{{file.filename}}";
var load_file = "{{load_file}}";
var load_board = "{{load_board}}";

{% if save %}
// DEBUG DO NOT USE ON PRODUCTION
var save = "{{save}}";
// END DEBUG
{% endif %}
</script>
<script src="{% static 'js/elements.js' %}"></script>
<script src="{% static 'js/renderer.js' %}"></script>
<script async src="{% static 'js/file_viewer.js' %}"></script>
{% endblock %}

{% block world_content %}
<div id="file-area">
    <div id="details">
    <img src="{% if file.screenshot %}{% static 'images/screenshots/'|add:file.letter|add:'/'|add:file.screenshot %}{% else %}{% static 'images/screenshots/no_screenshot.png' %}{% endif %}" class="titlescreen">
    </div>

    <div id="file-list" class="col">
    <ul>
    <li class="selected" data-img="{% if file.screenshot %}{% static 'images/screenshots/'|add:file.letter|add:'/'|add:file.screenshot %}{% else %}{% static 'images/screenshots/no_screenshot.png' %}{% endif %}">Title Screen</li>
    {% for file in files %}
    <li>{{file}}</li>
    {% endfor %}
    </ul>
    </div>

    <div id="tab-area">
        <div id="file-tabs">
            <ul><li name="world-info">World</li><li name="board-info">Board</li><li name="element-info">Element</li><li name="stat-info">Stats</li><li name="preferences">Prefs.</li></ul>
        </div>
        <div id="world-info" class="toggle"></div>
        <div id="board-info" class="toggle"></div>
        <div id="element-info" class="toggle"></div>
        <div id="stat-info" class="toggle"></div>
        <div id="preferences" class="toggle">
            <select name="charset">
                <optgroup label="Standard Fonts">
                    {% for charset in charsets %}
                    <option value="{{charset.0}}">{{charset.1}}</option>
                    {% endfor %}
                </optgroup>
                <optgroup label="Custom Fonts">
                    {% for charset in custom_charsets %}
                    <option value="{{charset}}">{{charset}}</option>
                    {% endfor %}
                </optgroup>
            </select>

            <label><input type="checkbox" name="2x" value="1"> - 2x Zoom</label>
            <br>
            <label>
                <input type="radio" name="renderer" value="zzt_standard" checked> 
                Standard
            </label>
            <label>
                <input type="radio" name="renderer" value="zzt_objects">
                Object Highlight
            </label>
        </div>
    </div>

    {% if save %}
    <form method="POST" action="/debug/save" name="save">
    {% csrf_token %}
    <input name="screenshot">
    <input name="letter" value="{{file.letter}}">
    <input name="zip" value="{{file.filename}}">
    <input type="submit" id="save" value="Save">
    </form>
    {% endif %}
</div>
{% endblock %}
