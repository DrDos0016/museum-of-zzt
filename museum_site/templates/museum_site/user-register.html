{% extends "museum_site/main.html" %}

{% block style %}
<style>
.block-group
{
    flex:4;
}

#terms
{
    width:84ch;
    height:26ch;
}

.error
{
    background-color:#F55;
}

#user-registration-form p
{
    flex:0 0 100%;
    font-weight:bold;
}
</style>
{% endblock %}

{% block content %}
<section id="content" class="block">
<h1>Register an Account</h1>

{% if errors.etc %}<p style="font-weight:bold">{{errors.etc}}</p>{% endif %}
{% if registration_open %}
<form method="POST" id="user-registration-form">
{% csrf_token %}

<!--- Shh! -->
<div style="width:0px;height:0px;overflow:hidden;">
    <label for="first-name">First Name:<br>
        <span class="sub"></span>
    </label>
    <div class="field-group">
        <input id="first-name" name="first-name" maxlength="20" value="">
    </div>
</div>

<div class="field{% if errors.username %} error{% endif %}">
    <label for="username">Username:<br>
        <span class="sub"></span>
    </label>
    <input id="username" name="username" maxlength="150" value="{{request.POST.username}}">
    {% if errors.username %}<p>{{errors.username}}</p>{% endif %}
</div>

<div class="field{% if errors.email %} error{% endif %}">
    <label for="email">Email Address:<br>
        <span class="sub">A valid email address is required to verify your account.</span>
    </label>
    <input id="email" name="email" maxlength="150" value="{{request.POST.email}}">
    {% if errors.email %}<p>{{errors.email}}</p>{% endif %}
</div>

<div class="field{% if errors.pwd %} error{% endif %}">
    <label for="moz-pw">Password:<br>
        <span class="sub">Use a unique password for your account. Passwords are hashed and will not be viewable.</span>
    </label>
    <input id="moz-pw" name="moz-pw" maxlength="150" type="password" value="">
    {% if errors.pwd %}<p>{{errors.pwd}}</p>{% endif %}
</div>

<div class="field">
    <label for="moz-pw-conf">Confirm Password:<br>
        <span class="sub"></span>
    </label>
    <input id="moz-pw-conf" name="moz-pw-conf" maxlength="150" type="password" value="">
</div>

<div class="field{% if errors.tos %} error{% endif %}">
    <label for="username">Terms:<br>
        <span class="sub"></span>
    </label>
    <div class="block-group">
        <textarea id="terms" readonly>{{terms}}</textarea><br>
        <label><input type="checkbox" name="tos-agreement" value="agree"> I agree to the above terms of service.</label>
        {% if errors.tos %}<p>{{errors.tos}}</p>{% endif %}
    </div>
</div>

{% comment %}
<div class="field">
    <label for="moz-z-cap">Captcha:<br>
        <span class="sub"></span>
    </label>
    <div class="field-group">
        <input id="moz-z-cap" name="moz-z-cap" maxlength="6" value="">
    </div>
</div>
{% endcomment %}

<div class="field">
    <button type="submit" id="submit-registration-button" class="full-width-submit">Register Account</button>
</div>
</form>
{% else %}
<p>Account registration is temporarily closed.</p>
{% endif %}
</section>
{% endblock %}
