{% load staticfiles %}
{% load site_tags %}
<!DOCTYPE html>
<html lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">

<title>{% block title %}{{title}}{% endblock %}{% if title %} - {% endif %}Museum of ZZT</title>
<link rel="stylesheet" type="text/css" href="{% static 'css/style.css' %}">
<link rel="stylesheet" type="text/css" href="{% static 'css/forms.css' %}">
<link rel="stylesheet" media="(max-width: 1023px)" href="{% static 'css/small.css' %}">
<link rel="stylesheet" media="(max-width: 800px)" href="{% static 'css/mobile.css' %}">
<link rel="stylesheet" type="text/css" href="{% static 'css/zzt.css' %}">
<link rel="shortcut icon" href="{% static 'images/favicon.png' %}">

<meta name="author" content="Dr. Dos">
<meta name="description" content="The Museum of ZZT website is dedicated towards the curation and preservation of ZZT worlds made by budding game developers. Explore over 25 years of indie gaming history.">
<meta name="keywords" content="ZZT">

{% block og %}
<meta property="og:title" content="{% if title %}{{title}} - {% endif %}Museum of ZZT">
<meta property="og:type" content="website">
{% if article.preview %}<meta property="og:image" content="{{DOMAIN}}{% static 'images/'|add:article.preview %}">
{% elif file.screenshot %}<meta property="og:image" content="{{DOMAIN}}{% static 'images/screenshots/'|add:file.letter|add:'/'|add:file.screenshot' %}">
{% else %}<meta property="og:image" content="{{DOMAIN}}{% static 'images/og_default.jpg' %}">{% endif %}
<meta property="og:url" content="{{request.build_absolute_uri}}">

<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="@worldsofzzt">
{% if article.title %}<meta name="twitter:title" content="{{article.title}}">
{% elif file.title %}<meta name="twitter:title" content="{{file.title}}">
{% else %}<meta name="twitter:title" content="Museum of ZZT">{% endif %}
{% if article.summary %}<meta name="twitter:description" content="{{article.summary}}">
{% else %}<meta name="twitter:description" content="{{title|default:'A Museum of ZZT page'}}">{% endif %}
{% if article.preview %}<meta name="twitter:image" content="{{DOMAIN}}{% static 'images/'|add:article.preview %}">
{% elif file.screenshot %}<meta name="twitter:image" content="{{DOMAIN}}{% static 'images/screenshots/'|add:file.letter|add:'/'|add:file.screenshot' %}">
{% else %}<meta property="twitter:image" content="{{DOMAIN}}{% static 'images/og_default.jpg' %}">{% endif %}
{% endblock %}

{% block analytics %}
{% if request.get_host == "beta.museumofzzt.com" %}<!--N/A-->
{% elif request.get_host == "museumofzzt.com" %}
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-45185267-6', 'auto');
  ga('send', 'pageview');

</script>
{% else %}<!--N/A-->{% endif %}
{% endblock %}

<!--<script src="//ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>-->
<script src="/static/js/jquery.3.1.0.min.js"></script>
<script>
$(document).ready(function (){
    // Screenshot Zoom
    $(".file-screen").click(function (){
        if ($(this).css("max-width") != "100%")
            $(this).css({"max-width":"100%", "cursor":"zoom-out"});
        else
            $(this).css({"max-width":"240px", "cursor":"zoom-in"});
    });

    // Reload on sort change
    $(".pages select[name=sort]").change(function (){
        var location = ("" + window.location);

        if (location.indexOf("?") == -1)
            window.location = "?sort="+$(this).val();
        else
        {
            var qs = location.split("?")[1];
            var params = qs.split("&");
            var new_qs = "?";
            console.log(qs);
            console.log(params);

            for (idx in params)
            {
                var key = params[idx].split("=")[0];
                var val = params[idx].split("=")[1];

                if (key == "sort")
                    new_qs += key + "=" + $(this).val();
                else
                    new_qs += key + "=" + val;
                new_qs += "&";
            }
            new_qs = new_qs.slice(0, -1);

            // Make sure there's a sort param
            if (new_qs.indexOf("sort=") == -1)
                new_qs += "&sort="+$(this).val();

            window.location = new_qs;
        }
    });

    // Content warnings
    if (document.cookie.replace(/(?:(?:^|.*;\s*)hide_content_warnings\s*\=\s*([^;]*).*$)|^.*$/, "$1") == 1)
    {
        console.log("Hiding CWs");
        $(".content-warning").hide();
    }

    $("span[name=cw-hide-this]").click(function (){
        $(".content-warning").hide();
    });

    $("span[name=cw-hide-all]").click(function (){
        $(".content-warning").hide();
        var now = new Date();
        var time = now.getTime();
        var expireTime = time + (1000 * 31536000); // 1yr
        now.setTime(expireTime);
        document.cookie = "hide_content_warnings=1;expires=" + now.toGMTString() + ";path=/";
    });
});
</script>
{% block scripts %}
{% endblock %}
{% block style %}
{% endblock %}
</head>

<body>

<div class="flex-container">
<header>
    <nav>
        <a href="/" id="logo"></a>
        <a href="/article/1/about-zzt">About ZZT</a>
        <a href="/upload">Upload</a>
        <a href="http://zzt.org/zu/wiki/Main_Page">Wiki</a>
        <a href="http://zzt.org/fora">z2 Forums</a>
    </nav>
</header>
<section id="sidebar-left" class="col sidebar">
    <div id="featured" class="block">
        <h1>Featured Game</h1>
        <a href="{{fg.file_url}}">{{fg.title}}</a><br>
        <a href="{{fg.file_url}}"><img src="{% if fg.screenshot %}{% static 'images/screenshots/'|add:fg.letter|add:'/'|add:fg.screenshot' %}{% else %}{% static 'images/screenshots/no_screenshot.png' %}{% endif %}" alt="{{fg.title}}"></a>
        <br>
        by {% for author in fg.author_list %}<a href="/search?author={{author}}&exact=1">{{author}}</a>{% if not forloop.last %}, {% endif %}{% endfor %}
        <br>
        <a href="/featured">Featured Games</a>
    </div>

    <div class="block worlds-block">
        <h1>ZZT Worlds</h1>
        <div id="letters">
            <a href="/browse/1">#</a>
            <a href="/browse/a">A</a>
            <a href="/browse/b">B</a>
            <a href="/browse/c">C</a>
            <a href="/browse/d">D</a>
            <a href="/browse/e">E</a>
            <a href="/browse/f">F</a>
            <a href="/browse/g">G</a>
            <a href="/browse/h">H</a>

            <a href="/browse/i">I</a>
            <a href="/browse/j">J</a>
            <a href="/browse/k">K</a>
            <a href="/browse/l">L</a>
            <a href="/browse/m">M</a>
            <a href="/browse/n">N</a>
            <a href="/browse/o">O</a>
            <a href="/browse/p">P</a>
            <a href="/browse/q">Q</a>

            <a href="/browse/r">R</a>
            <a href="/browse/s">S</a>
            <a href="/browse/t">T</a>
            <a href="/browse/u">U</a>
            <a href="/browse/v">V</a>
            <a href="/browse/w">W</a>
            <a href="/browse/x">X</a>
            <a href="/browse/y">Y</a>
            <a href="/browse/z">Z</a>
        </div>

        <div>
            <a href="/random">Random ZZT World</a><br>
            <a href="/mass-downloads">Mass Downloads</a><br>
            <a href="/new">New Additions</a><br>
            <a href="/uploaded">Upload Queue</a><br>
            {% comment %}<a href="{% url 'local' %}">Local File Viewer</a><br>{% endcomment %}
        </div>

        <div>
            <form method="GET" action="/search">
            Search:<br>
            <input name="q" value="{{q}}"><input id="search-button" type="submit" value="Go">
            <br>
            <a href="/advanced-search">Advanced Search</a>
            </form>
        </div>
    </div>

    <div class="block">
        <h1>Downloads</h1>
        <a href="{% url 'zzt_dl' %}">ZZT</a><br>
        <a href="http://www.dosbox.com/download.php?main=1" target="_blank">DOSBox</a><br>
        <a href="https://github.com/cknave/kevedit" target="_blank">Kev-Edit</a><br>
        <a href="/clones">ZZT Clones</a><br>
        <a href="/super-zzt">Super ZZT Worlds</a><br>
        <a href="/utilities">External Utilities</a><br>
        <a href="/zig-worlds">ZIG Worlds</a><br>
        <a href="/zzm-audio">ZZM Music</a><br>
    </div>
</section>


{% block content %}
<main id="content" class="col">
</main>
{% endblock %}

<section id="sidebar-right" class="col sidebar">
    <div class="block">
        <h1>Reference</h1>

        <h2>Directories</h2>
        <a href="/article?sort=date">Articles by date</a><br>
        <a href="/article">Articles by category</a><br>
        <a href="{% url 'directory' 'author' %}">Authors</a><br>
        <a href="{% url 'directory' 'company' %}">Companies</a><br>
        <a href="{% url 'directory' 'genre' %}">Genres</a><br>

        <h2>Playing</h2>
        <a href="/getting-started">Getting Started With ZZT</a><br>
        <a href="/article/walkthrough">Walkthroughs</a><br>
        <a href="{% url 'zzt_cheats' %}">ZZT Cheats</a><br>

        <h2>Editing</h2>
        <a href="/ascii">ASCII Characters</a><br>
        <a href="/file/local">Local File Viewer</a><br>

        <h2>Historical</h2>
        <a href="{% url 'closer_looks' %}">Closer Looks</a><br>
        <a href="{% url 'lost_worlds' %}">Lost Worlds</a><br>
        <a href="http://zzt.org" target="_blank">z2 Classic Website</a><br>
        <a href="{% url 'comic_index' %}">ZZT Comics Archive</a><br>
    </div>

    {% comment %}
    <div class="block">
        <h1>Contests</h1>
        <a href="" class="broken">24 Hours of ZZT</a><br>
        <a href="" class="broken">Weekend of ZZT</a>
    </div>
    {% endcomment %}

    <div class="block">
        <h1>Worlds of ZZT</h1>
        <div class="social">
            <a href="https://twitter.com/worldsofzzt" target="_blank"><img src="{% static 'images/social/Twitter_Social_Icon_Rounded_Square_Color.png' %}" alt="Twitter" title="Twitter"></a>
            <a href="https://tumblr.com/worldsofzzt" target="_blank"><img src="{% static 'images/social/tumblr.png' %}" alt="Tumblr" title="Tumblr"></a>
            <a href="https://patreon.com/worldsofzzt" target="_blank"><img src="{% static 'images/social/patreon_logo.png' %}" alt="Patreon" title="Patreon"></a>
            <a href="https://www.youtube.com/channel/UCr0f-r1bRexAZK8sWyk4NJA" target="_blank"><img src="{% static 'images/social/YouTube-social-squircle_red_24px.png' %}" alt="YouTube" title="YouTube"></a>
            <a href="https://twitch.tv/worldsofzzt" target="_blank"><img src="{% static 'images/social/Glitch_Purple_RGB.png' %}" alt="Twitch" title="Twitch"></a>
            <a href="https://github.com/DrDos0016/z2" target="_blank"><img src="{% static 'images/social/GitHub-Mark-32px.png' %}" alt="GitHub" title="GitHub"></a>
        </div>

        <a href="{% url 'correction_policy' %}">Correction Policy</a><br>
        <a href="{% url 'data_integrity' %}">Data Integrity</a><br>
        <a href="{% url 'removal_policy' %}">Removal Policy</a><br>
        <a href="{% url 'review_policy' %}">Review Policy</a><br>
        <a href="{% url 'credits' %}">Site Credits</a><br>
        <a href="{% url 'upload_policy' %}">Upload Policy</a><br>
        <br>
        <b>Patron Restricted</b><br>
        $1+ <a href="/poll/">Closer Look Poll</a><br>
        $2+ <a href="{% url 'patron_plans' %}">Planned Articles/Streams</a>
        $5+ <a href="https://beta.museumofzzt.com{{request.path}}">Private Beta</a><br>

    </div>
</section>
</div>

<footer>
- Museum of ZZT -
{% if drupe %}Happy Drupe Day! -{% endif %}
<br>
&copy; 2015-{{datetime.year}} <a href="mailto:doctordos@gmail.com">Dr. Dos</a><br>
Additional content copyright its  <a href="{% url 'credits' %}">respective owners</a>
<br>
{% if debug %}
<div class="debug">
{{DOMAIN}} |
{{request.build_absolute_uri}} |
{{request.META.HTTP_HOST}} |Host: {{HOST}} | Env: {{ENV}}
</div>
{% if user.is_staff %}
<a id="showdebug" class="jsLink">TOGGLE DEBUG</a>
<script>
$("#showdebug").click(function (){
    $(".debug").toggle();
});
</script>
{% endif %}
{% endif %}
</footer>

</body>
</html>
