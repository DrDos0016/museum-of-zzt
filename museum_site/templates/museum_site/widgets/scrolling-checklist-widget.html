<div class="scrolling-checklist widget{% if filterable %} filterable{% endif %}">
    {% if filterable %}<div class="scrolling-checklist-filter">
        Filter: <input class="widget-filter" value="" id="{{widget.attrs.id}}"> <input class="widget-clear" type="button" value="Clear">
    </div>{% endif %}

    {% for category in categories %}
        <div class="checklist-header">{{category}}</div>
        {% for item in choices %}
        {% if item.0.instance.category == category %}
        <label><input name="{{widget.name}}" type="{{input_method}}" value="{{item.0.instance.pk}}"{% if item.0.instance.pk|stringformat:'s' in widget.value %} checked {% endif %}>{{item.0.instance.title}}</label>
        {% endif %}
        {% endfor %}
    {% empty %}
        {% for item in choices %}
        <label><input name="{{widget.name}}" type="{{input_method}}" value="{{item.0.instance.pk}}"{% if item.0.instance.pk|stringformat:'s' in widget.value %} checked {% endif %}>{{item.0.instance.title}}</label>
        {% endfor %}
    {% endfor %}
</div>
{% for button in buttons %}
<input type="button" value="{{button}}" class="widget-control-button" data-input-name="{{widget.name}}"{% if button == "Default" %}data-default="{{default|join:'/'}}"{% endif %}>
{% endfor %}
{% if show_selected %}<div>Selected: <span class="widget-selected" data-input-name="{{widget.name}}"><i>None</i></span></div>{% endif %}
